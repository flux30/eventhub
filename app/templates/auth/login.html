{% extends "base.html" %}

{% block title %}Sign in - EventHub{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-ambient-blob"></div>

    <div class="auth-wrapper">
        <!-- Left side - Branding -->
        <div class="auth-brand-side">
            <div class="brand-content">
                <h1 class="brand-title">Welcome back</h1>
                <p class="brand-subtitle">Sign in to discover and manage your events</p>

                <div class="brand-features">
                    <div class="brand-feature">
                        <div class="feature-icon-premium">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M8 2V5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                <path d="M16 2V5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                <path d="M3.5 9.09H20.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                <path d="M21 8.5V17C21 20 19.5 22 16 22H8C4.5 22 3 20 3 17V8.5C3 5.5 4.5 3.5 8 3.5H16C19.5 3.5 21 5.5 21 8.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <span>Access your events</span>
                    </div>
                    <div class="brand-feature">
                        <div class="feature-icon-premium">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M19.5 12.5L11.5 16.5L3.5 12.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M19.5 15.5L11.5 19.5L3.5 15.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M19.5 9.5L11.5 13.5L3.5 9.5L11.5 5.5L19.5 9.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <span>Manage tickets</span>
                    </div>
                    <div class="brand-feature">
                        <div class="feature-icon-premium">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M12 6.44V9.77" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
                                <path d="M12.02 2C8.34 2 5.36 4.98 5.36 8.66V10.76C5.36 11.44 5.08 12.46 4.73 13.04L3.46 15.16C2.68 16.47 3.22 17.93 4.66 18.41C9.44 20 14.61 20 19.39 18.41C20.74 17.96 21.32 16.38 20.59 15.16L19.32 13.04C18.97 12.46 18.69 11.43 18.69 10.76V8.66C18.68 5 15.68 2 12.02 2Z" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <span>Get reminders</span>
                    </div>
                </div>

                <div class="trust-signals">
                    <div class="trust-item">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M12 2L3 7V11C3 16.55 6.84 21.74 12 23C17.16 21.74 21 16.55 21 11V7L12 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Encrypted authentication</span>
                    </div>
                    <div class="trust-item">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M12 22C17.5 22 22 17.5 22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M8 12L10.5 14.5L16 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>No spam, ever</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right side - Form -->
        <div class="auth-form-side">
            <div class="auth-card" id="auth-card">
                <div class="auth-header">
                    <h2>Sign in</h2>
                    <p>Enter your credentials to continue</p>
                </div>

                <form method="POST" class="auth-form" id="login-form">
                    <div class="form-group-auth">
                        <label for="email">Email address</label>
                        <input
                            type="email" id="email" name="email"
                            class="form-control-auth"
                            placeholder="you@example.com"
                            autocomplete="email"
                            required autofocus
                        >
                    </div>

                    <div class="form-group-auth">
                        <label for="password">Password</label>
                        <div class="password-wrapper">
                            <input
                                type="password" id="password" name="password"
                                class="form-control-auth"
                                placeholder="Enter your password"
                                autocomplete="current-password"
                                required
                            >
                            <button type="button" class="password-toggle-auth"
                                    onclick="togglePasswordAuth('password')"
                                    aria-label="Toggle password visibility">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" id="password-icon">
                                    <path d="M15.58 12C15.58 13.98 13.98 15.58 12 15.58C10.02 15.58 8.42 13.98 8.42 12C8.42 10.02 10.02 8.42 12 8.42C13.98 8.42 15.58 10.02 15.58 12Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M12 20.27C15.53 20.27 18.82 18.19 21.11 14.59C22.01 13.18 22.01 10.81 21.11 9.4C18.82 5.8 15.53 3.72 12 3.72C8.47 3.72 5.18 5.8 2.89 9.4C1.99 10.81 1.99 13.18 2.89 14.59C5.18 18.19 8.47 20.27 12 20.27Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                        </div>
                        <a href="{{ url_for('auth.forgot_password') }}" class="forgot-password-link">
                            Forgot password?
                        </a>
                    </div>

                    <div class="form-options">
                        <label class="checkbox-auth">
                            <input type="checkbox" name="remember">
                            <span>Remember me</span>
                        </label>
                        <span class="checkbox-hint">Stay signed in for faster access</span>
                    </div>

                    <button type="submit" class="btn-auth btn-primary-auth" id="submit-btn">
                        Sign in
                    </button>
                </form>

                <div class="auth-divider"><span>or</span></div>

                <p class="auth-footer-text">
                    Don't have an account?
                    <a href="{{ url_for('auth.register') }}" class="auth-link">Create one</a>
                </p>
            </div>
        </div>
    </div>
</div>

<style>
.auth-container {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    padding: 40px 20px;
}
.auth-ambient-blob {
    position: absolute;
    width: 600px;
    height: 600px;
    background: radial-gradient(circle, rgba(77, 166, 255, 0.12), transparent 70%);
    top: -200px;
    right: -150px;
    filter: blur(100px);
    animation: ambient-float 20s ease-in-out infinite;
}
@keyframes ambient-float {
    0%, 100% { transform: translate(0, 0); }
    50%       { transform: translate(60px, -50px); }
}
.auth-wrapper {
    max-width: 1300px;
    width: 100%;
    display: grid;
    grid-template-columns: 5fr 7fr;
    gap: 80px;
    align-items: center;
    position: relative;
    z-index: 1;
}
.auth-brand-side { padding: 40px; }
.brand-content    { max-width: 480px; }
.brand-title {
    font-size: 52px;
    font-weight: 800;
    letter-spacing: -2px;
    margin-bottom: 16px;
    line-height: 1.1;
}
.brand-subtitle {
    font-size: 18px;
    color: var(--text-secondary);
    margin-bottom: 56px;
    line-height: 1.6;
}
.brand-features {
    display: flex;
    flex-direction: column;
    gap: 24px;
    margin-bottom: 48px;
}
.brand-feature {
    display: flex;
    align-items: center;
    gap: 16px;
}
.feature-icon-premium {
    width: 48px;
    height: 48px;
    background: var(--bg-elevated);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--accent);
    flex-shrink: 0;
}
.brand-feature span {
    font-size: 16px;
    font-weight: 500;
    color: var(--text-primary);
}
.trust-signals {
    display: flex;
    flex-direction: column;
    gap: 12px;
    padding: 20px;
    background: var(--bg-elevated);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.05);
}
.trust-item {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 14px;
    color: var(--text-secondary);
}
.trust-item svg { color: var(--accent); flex-shrink: 0; }
.auth-form-side { padding: 40px; }
.auth-card {
    background: var(--bg-elevated);
    border-radius: 24px;
    padding: 56px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
    animation: slideInRight 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    max-width: 600px;
    width: 100%;
}
@keyframes slideInRight {
    from { opacity: 0; transform: translateX(30px); }
    to   { opacity: 1; transform: translateX(0);    }
}
.auth-card.shake {
    animation: shake 0.3s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
}
@keyframes shake {
    10%, 90% { transform: translateX(-5px); }
    20%, 80% { transform: translateX(5px);  }
    30%, 50%, 70% { transform: translateX(-3px); }
    40%, 60% { transform: translateX(3px);  }
}
.auth-header        { margin-bottom: 40px; }
.auth-header h2     { font-size: 36px; font-weight: 700; letter-spacing: -1px; margin-bottom: 8px; }
.auth-header p      { color: var(--text-secondary); font-size: 15px; }
.auth-form          { display: flex; flex-direction: column; gap: 24px; }
.form-group-auth    { display: flex; flex-direction: column; gap: 8px; }
.form-group-auth label { font-size: 14px; font-weight: 600; color: var(--text-primary); }
.form-control-auth {
    width: 100%;
    padding: 16px 18px;
    background: var(--bg-base);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 12px;
    font-size: 15px;
    font-family: inherit;
    color: var(--text-primary);
    transition: border 0.25s ease, box-shadow 0.25s ease, background 0.25s ease;
}
.form-control-auth:hover  { border-color: rgba(255, 255, 255, 0.15); }
.form-control-auth:focus  {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 4px rgba(77, 166, 255, 0.15);
    background: var(--bg-elevated);
}
.form-control-auth::placeholder { color: var(--text-tertiary); }
.password-wrapper { position: relative; }
.password-wrapper .form-control-auth { padding-right: 50px; }
.password-toggle-auth {
    position: absolute;
    right: 0; top: 0;
    height: 100%; width: 50px;
    background: transparent; border: none;
    color: var(--text-tertiary);
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: color 0.25s ease;
}
.password-toggle-auth:hover { color: var(--accent); }
.form-options    { display: flex; flex-direction: column; gap: 6px; }
.checkbox-auth   { display: flex; align-items: center; gap: 10px; cursor: pointer; font-size: 14px; color: var(--text-secondary); }
.checkbox-auth input[type="checkbox"] { width: 18px; height: 18px; cursor: pointer; accent-color: var(--accent); }
.checkbox-hint   { font-size: 12px; color: var(--text-tertiary); margin-left: 28px; }
.btn-auth        { width: 100%; padding: 16px; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.25s ease; border: none; font-family: inherit; }
.btn-primary-auth { background: var(--text-primary); color: var(--bg-base); }
.btn-primary-auth:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 12px 28px rgba(0,0,0,0.5); }
.btn-primary-auth:disabled { opacity: 0.6; cursor: not-allowed; }
.auth-divider    { position: relative; text-align: center; margin: 32px 0; }
.auth-divider::before { content: ''; position: absolute; top: 50%; left: 0; right: 0; height: 1px; background: rgba(255,255,255,0.08); }
.auth-divider span { position: relative; background: var(--bg-elevated); padding: 0 16px; font-size: 13px; color: var(--text-tertiary); }
.auth-footer-text { text-align: center; color: var(--text-secondary); font-size: 14px; }
.auth-link { color: var(--accent); text-decoration: none; font-weight: 600; transition: opacity 0.25s ease; }
.auth-link:hover { opacity: 0.8; }
.forgot-password-link { display: inline-block; margin-top: 8px; font-size: 13px; color: var(--accent); text-decoration: none; font-weight: 500; }
.forgot-password-link:hover { opacity: 0.8; text-decoration: underline; }
@media (max-width: 968px) {
    .auth-wrapper { grid-template-columns: 1fr; gap: 40px; }
    .auth-brand-side { display: none; }
    .auth-card { padding: 40px; max-width: 100%; }
}
@media (max-width: 576px) {
    .auth-card { padding: 32px 24px; }
    .auth-header h2 { font-size: 28px; }
}
</style>

<script>
function togglePasswordAuth(fieldId) {
    const field = document.getElementById(fieldId);
    const icon  = document.getElementById(fieldId + '-icon');
    if (field.type === 'password') {
        field.type = 'text';
        icon.innerHTML = '<path d="M14.53 9.47L9.47 14.53C8.82 13.88 8.42 12.99 8.42 12C8.42 10.02 10.02 8.42 12 8.42C12.99 8.42 13.88 8.82 14.53 9.47Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M17.82 5.77C16.07 4.45 14.07 3.73 12 3.73C8.47 3.73 5.18 5.81 2.89 9.41C1.99 10.82 1.99 13.19 2.89 14.6C3.68 15.84 4.6 16.91 5.6 17.77" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M8.42 19.53C9.56 20.01 10.77 20.27 12 20.27C15.53 20.27 18.82 18.19 21.11 14.59C22.01 13.18 22.01 10.81 21.11 9.4C20.78 8.88 20.42 8.39 20.05 7.93" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M15.51 12.7C15.25 14.11 14.1 15.26 12.69 15.52" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M9.47 14.53L2 22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M22 2L14.53 9.47" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>';
    } else {
        field.type = 'password';
        icon.innerHTML = '<path d="M15.58 12C15.58 13.98 13.98 15.58 12 15.58C10.02 15.58 8.42 13.98 8.42 12C8.42 10.02 10.02 8.42 12 8.42C13.98 8.42 15.58 10.02 15.58 12Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 20.27C15.53 20.27 18.82 18.19 21.11 14.59C22.01 13.18 22.01 10.81 21.11 9.4C18.82 5.8 15.53 3.72 12 3.72C8.47 3.72 5.18 5.8 2.89 9.4C1.99 10.81 1.99 13.18 2.89 14.59C5.18 18.19 8.47 20.27 12 20.27Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>';
    }
}

// Loading state on submit
const loginForm = document.getElementById('login-form');
const submitBtn = document.getElementById('submit-btn');
if (loginForm) {
    loginForm.addEventListener('submit', function (e) {
        if (!document.getElementById('email').value || !document.getElementById('password').value) {
            e.preventDefault();
            return;
        }
        submitBtn.disabled    = true;
        submitBtn.textContent = 'Signing in...';
    });
}
</script>
{% endblock %}
